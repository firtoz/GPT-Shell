{"version":3,"file":"BaseConversation.js","sourceRoot":"","sources":["../../src/core/BaseConversation.ts"],"names":[],"mappings":"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"}